I"¹<h2 id="-head">Â«Â«Â«&lt; HEAD</h2>
<p>layout:     post
title:      â€œRobots åè®®â€
subtitle:   â€œåˆ†ærobotsåè®®â€
date:       2019-11-15 19:50:25
author:     â€œBalboâ€
header-img: â€œimg/post-bg-2019.jpgâ€
tags:
    - reptile
â€”
åˆ©ç”¨ urllib çš„ robotparser æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç½‘ç«™ Robots åè®®çš„åˆ†æã€‚</p>

<h2 id="robots-åè®®">Robots åè®®</h2>
<p>Robots åè®®å°±æ˜¯æ¯ä¸ªç½‘ç«™å¯¹äºæ¥åˆ°çš„çˆ¬è™«æ‰€æå‡ºçš„è¦æ±‚ã€‚(å¹¶éå¼ºåˆ¶è¦æ±‚éµå®ˆçš„åè®®ï¼Œåªæ˜¯ä¸€ç§å»ºè®®ï¼Œä½†æ˜¯å¦‚æœä¸éµå®ˆæœ‰å¯èƒ½ä¼šæ‰¿æ‹…æ³•å¾‹è´£ä»»ã€‚ï¼‰</p>

<p>æ¯ä¸ªç½‘ç«™çš„ Robots åè®®éƒ½åœ¨è¯¥ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹ï¼Œä¾‹å¦‚ç™¾åº¦çš„ Robots åè®®çš„ä½ç½®å°±æ˜¯ https://www.baidu.com/robots.txt æˆ–è€…äº¬ä¸œçš„ Robots åè®®å°±åœ¨ https://www.jd.com/robots.txt</p>

<p>ä¸‹é¢ç»™å‡ºä¸€æ®µäº¬ä¸œçš„ Robots çš„å†…å®¹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User-agent: * 
Disallow: /?* 
Disallow: /pop/*.html 
Disallow: /pinpai/*.html?* 
User-agent: EtaoSpider 
Disallow: / 
User-agent: HuihuiSpider 
Disallow: / 
User-agent: GwdangSpider 
Disallow: / 
User-agent: WochachaSpider 
Disallow: /
</code></pre></div></div>

<p>ç¬¬ä¸€ä¸ªçš„æ„æ€å°±æ˜¯è¯´å¯¹äºæ‰€æœ‰çš„çˆ¬è™«ï¼Œä¸èƒ½çˆ¬å–åœ¨/ï¼Ÿå¼€å¤´çš„è·¯å¾„ï¼Œä¹Ÿä¸èƒ½è®¿é—®å’Œ/pop/*.html åŒ¹é…çš„è·¯å¾„ã€‚
åé¢å››ä¸ªç”¨æˆ·ä»£ç†çš„çˆ¬è™«ä¸å…è®¸è®¿é—®ä»»ä½•èµ„æºã€‚</p>

<p>æ‰€ä»¥ Robots åè®®çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User-agent: è¿™é‡Œæ˜¯çˆ¬è™«çš„åå­—
Disallow: /è¯¥çˆ¬è™«ä¸å…è®¸è®¿é—®çš„å†…å®¹
</code></pre></div></div>

<h2 id="robotparser">robotparser</h2>
<p>è¿æ¥ Robots åè®®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ robotparser æ¨¡å—æ¥è§£æ robots.txtã€‚è¯¥æ¨¡å—æä¾›äº†ä¸€ä¸ªç±» RobotFileParserï¼Œä»–å¯ä»¥æ ¹æ®æ‘¸ç½‘ç«™çš„ robots.txt æ–‡ä»¶æ¥é¢‘æ®µä¸€ä¸ªçˆ¬å–çˆ¬å‡ºæ˜¯å¦æœ‰æƒé™æ¥çˆ¬å–è¿™ä¸ªç½‘ç«™</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">urllib.robotparser</span> <span class="kn">import</span> <span class="n">RobotFileParser</span>

<span class="n">rp</span> <span class="o">=</span> <span class="n">RobotFileParser</span><span class="p">()</span>
<span class="n">rp</span><span class="p">.</span><span class="n">set_url</span><span class="p">(</span><span class="s">'http://www.jianshu.com/robots.txt'</span><span class="p">)</span>
<span class="n">rp</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">rp</span><span class="p">.</span><span class="n">can_fetch</span><span class="p">(</span><span class="s">'*'</span><span class="p">,</span> <span class="s">'https://www.jianshu.com/p/46034a031b7a'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">rp</span><span class="p">.</span><span class="n">can_fetch</span><span class="p">(</span><span class="s">'*'</span><span class="p">,</span> <span class="s">'http://www.jianshu.com/search?q=python&amp;page=1&amp;type=collections'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>False
False
</code></pre></div></div>
<p>=======
â€”
layout: post
title: Robots åè®®
subtitle: åˆ†ærobotsåè®®
author: Balbo Cheng
categories: python
tags: [reptile]
sidebar: []
â€”
åˆ©ç”¨ urllib çš„ robotparser æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç½‘ç«™ Robots åè®®çš„åˆ†æã€‚</p>

<h2 id="robots-åè®®-1">Robots åè®®</h2>
<p>Robots åè®®å°±æ˜¯æ¯ä¸ªç½‘ç«™å¯¹äºæ¥åˆ°çš„çˆ¬è™«æ‰€æå‡ºçš„è¦æ±‚ã€‚(å¹¶éå¼ºåˆ¶è¦æ±‚éµå®ˆçš„åè®®ï¼Œåªæ˜¯ä¸€ç§å»ºè®®ï¼Œä½†æ˜¯å¦‚æœä¸éµå®ˆæœ‰å¯èƒ½ä¼šæ‰¿æ‹…æ³•å¾‹è´£ä»»ã€‚ï¼‰</p>

<p>æ¯ä¸ªç½‘ç«™çš„ Robots åè®®éƒ½åœ¨è¯¥ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹ï¼Œä¾‹å¦‚ç™¾åº¦çš„ Robots åè®®çš„ä½ç½®å°±æ˜¯ https://www.baidu.com/robots.txt æˆ–è€…äº¬ä¸œçš„ Robots åè®®å°±åœ¨ https://www.jd.com/robots.txt</p>

<p>ä¸‹é¢ç»™å‡ºä¸€æ®µäº¬ä¸œçš„ Robots çš„å†…å®¹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User-agent: * 
Disallow: /?* 
Disallow: /pop/*.html 
Disallow: /pinpai/*.html?* 
User-agent: EtaoSpider 
Disallow: / 
User-agent: HuihuiSpider 
Disallow: / 
User-agent: GwdangSpider 
Disallow: / 
User-agent: WochachaSpider 
Disallow: /
</code></pre></div></div>

<p>ç¬¬ä¸€ä¸ªçš„æ„æ€å°±æ˜¯è¯´å¯¹äºæ‰€æœ‰çš„çˆ¬è™«ï¼Œä¸èƒ½çˆ¬å–åœ¨/ï¼Ÿå¼€å¤´çš„è·¯å¾„ï¼Œä¹Ÿä¸èƒ½è®¿é—®å’Œ/pop/*.html åŒ¹é…çš„è·¯å¾„ã€‚
åé¢å››ä¸ªç”¨æˆ·ä»£ç†çš„çˆ¬è™«ä¸å…è®¸è®¿é—®ä»»ä½•èµ„æºã€‚</p>

<p>æ‰€ä»¥ Robots åè®®çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User-agent: è¿™é‡Œæ˜¯çˆ¬è™«çš„åå­—
Disallow: /è¯¥çˆ¬è™«ä¸å…è®¸è®¿é—®çš„å†…å®¹
</code></pre></div></div>

<h2 id="robotparser-1">robotparser</h2>
<p>è¿æ¥ Robots åè®®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ robotparser æ¨¡å—æ¥è§£æ robots.txtã€‚è¯¥æ¨¡å—æä¾›äº†ä¸€ä¸ªç±» RobotFileParserï¼Œä»–å¯ä»¥æ ¹æ®æ‘¸ç½‘ç«™çš„ robots.txt æ–‡ä»¶æ¥é¢‘æ®µä¸€ä¸ªçˆ¬å–çˆ¬å‡ºæ˜¯å¦æœ‰æƒé™æ¥çˆ¬å–è¿™ä¸ªç½‘ç«™</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">urllib.robotparser</span> <span class="kn">import</span> <span class="n">RobotFileParser</span>

<span class="n">rp</span> <span class="o">=</span> <span class="n">RobotFileParser</span><span class="p">()</span>
<span class="n">rp</span><span class="p">.</span><span class="n">set_url</span><span class="p">(</span><span class="s">'http://www.jianshu.com/robots.txt'</span><span class="p">)</span>
<span class="n">rp</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">rp</span><span class="p">.</span><span class="n">can_fetch</span><span class="p">(</span><span class="s">'*'</span><span class="p">,</span> <span class="s">'https://www.jianshu.com/p/46034a031b7a'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">rp</span><span class="p">.</span><span class="n">can_fetch</span><span class="p">(</span><span class="s">'*'</span><span class="p">,</span> <span class="s">'http://www.jianshu.com/search?q=python&amp;page=1&amp;type=collections'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>False
False
</code></pre></div></div>
<blockquote>
  <blockquote>
    <blockquote>
      <blockquote>
        <blockquote>
          <blockquote>
            <blockquote>
              <p>e5c77ca (æ–°é¡µé¢)</p>
            </blockquote>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
  </blockquote>
</blockquote>
:ET