I"Ò<h2 id="-head">Â«Â«Â«&lt; HEAD</h2>
<p>layout:     post
title:      â€œpyqueryâ€
subtitle:   â€œpyqueryâ€
date:       2019-11-21 12:46:22
author:     â€œBalboâ€
header-img: â€œimg/post-bg-2019.jpgâ€
tags:
    - reptile
â€”</p>
<h2 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h2>

<h3 id="å­—ç¬¦ä¸²åˆå§‹åŒ–">å­—ç¬¦ä¸²åˆå§‹åŒ–</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div&gt;
&lt;ul&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'li'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>

<h3 id="urlåˆå§‹åŒ–">URLåˆå§‹åŒ–</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s">'http://balbozheng.com'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'title'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;title&gt;ZhengXuJi&lt;/title&gt;
</code></pre></div></div>
<p>ä¹Ÿå¯ä»¥å†™æˆ</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://balbozheng.com'</span><span class="p">).</span><span class="n">text</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'title'</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="æ–‡ä»¶åˆå§‹åŒ–">æ–‡ä»¶åˆå§‹åŒ–</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">'demo.html'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'li'</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="åŸºæœ¬-css-é€‰æ‹©å™¨">åŸºæœ¬ CSS é€‰æ‹©å™¨</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'#container .list li'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'#container .list li'</span><span class="p">)))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;class 'pyquery.pyquery.PyQuery'&gt;
</code></pre></div></div>

<h2 id="æŸ¥æ‰¾èŠ‚ç‚¹">æŸ¥æ‰¾èŠ‚ç‚¹</h2>

<h3 id="å­èŠ‚ç‚¹">å­èŠ‚ç‚¹</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">items</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<span class="n">lis</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'li'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">lis</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>fing() çš„æœç´¢èŒƒå›´æ˜¯èŠ‚ç‚¹çš„æ‰€æœ‰å­å­™èŠ‚ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬åªæƒ³æŸ¥æ‰¾å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ children() æ–¹æ³•</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lis</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">children</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">lis</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>or</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lis</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">children</span><span class="p">(</span><span class="s">'.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">lis</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>

<h3 id="çˆ¶èŠ‚ç‚¹">çˆ¶èŠ‚ç‚¹</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list'</span><span class="p">)</span>
<span class="n">container</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">parent</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">container</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</code></pre></div></div>
<p>å¦‚æœæƒ³è·å–æŸä¸ªç¥–å…ˆèŠ‚ç‚¹ï¼Œå¯ä»¥ç”¨ parents() æ–¹æ³•</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">items</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list'</span><span class="p">)</span>
<span class="n">parents</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">parents</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parents</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">parents</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</code></pre></div></div>
<p>or</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">items</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list'</span><span class="p">)</span>
<span class="n">parents</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">parents</span><span class="p">(</span><span class="s">".wrap"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parents</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">parents</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</code></pre></div></div>

<h3 id="å…„å¼ŸèŠ‚ç‚¹">å…„å¼ŸèŠ‚ç‚¹</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list .item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">siblings</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>or</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list .item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">siblings</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>

<h2 id="éå†">éå†</h2>
<p>å¯¹äºå•ä¸ªèŠ‚ç‚¹æ¥è¯´ï¼Œå¯ä»¥ç›´æ¥æ‰“å°è¾“å‡ºï¼Œä¹Ÿå¯ä»¥ç›´æ¥è½¬æˆå­—ç¬¦ä¸²ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list .item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">li</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>å¯¹äºå¤šä¸ªèŠ‚ç‚¹çš„ç»“æœï¼Œæˆ‘ä»¬å°±éœ€è¦éå†æ¥è·å–</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
<span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">lis</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">li</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'generator'&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
</code></pre></div></div>

<h2 id="è·å–ä¿¡æ¯">è·å–ä¿¡æ¯</h2>
<h3 id="è·å–å±æ€§">è·å–å±æ€§</h3>

<p>æå–æŸä¸ªèŠ‚ç‚¹åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ attr() æ–¹æ³•æ¥è·å–å±æ€§</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active a'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">'href'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt; &lt;class 'pyquery.pyquery.PyQuery'&gt;
link3.html
</code></pre></div></div>
<p>å¦‚æœè¦è·å–å¤šä¸ªèŠ‚ç‚¹å±æ€§ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨éå†</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">a</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">'href'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>link2.html
link3.html
link4.html
link5.html
</code></pre></div></div>

<h3 id="è·å–æ–‡æœ¬">è·å–æ–‡æœ¬</h3>
<p>è·å–å…¶å†…éƒ¨æ–‡æœ¬</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active a'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">text</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;
third item
</code></pre></div></div>
<p>å¦‚æœæƒ³è·å–è¿™ä¸ªèŠ‚ç‚¹å†…éƒ¨çš„ HTML æ–‡æœ¬ï¼Œå°±è¦ç”¨ html() æ–¹æ³•</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active a'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">html</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;
&lt;span class="bold"&gt;third item&lt;/span&gt;
</code></pre></div></div>
<p>å¦‚æœæˆ‘ä»¬é€‰ä¸­çš„ç»“æœæ˜¯å¤šä¸ªèŠ‚ç‚¹ï¼Œæƒ³è¦è·å–æ¯ä¸ªèŠ‚ç‚¹çš„å†…éƒ¨ HTML æ–‡æœ¬ï¼Œåˆ™éœ€è¦éå†æ¯ä¸ªèŠ‚ç‚¹ã€‚è€Œ text() æ–¹æ³•ä½ ä¼‘å®‰æ’éå†å°±å¯ä»¥è·å–</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">html</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">text</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">text</span><span class="p">()))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>first item
first item second item third item fourth item fifth item
&lt;class 'str'&gt;
</code></pre></div></div>

<h2 id="èŠ‚ç‚¹æ“ä½œ">èŠ‚ç‚¹æ“ä½œ</h2>
<h3 id="addclass-å’Œ-removeclass">addClass å’Œ removeClass</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">remove_class</span><span class="p">(</span><span class="s">'active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">add_class</span><span class="p">(</span><span class="s">'active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>addClass() å’Œ removeClass() è¿™äº›æ–¹æ³•å¯ä»¥åŠ¨æ€æ”¹å˜èŠ‚ç‚¹çš„ Class å±æ€§</p>

<h3 id="attrtext-å’Œ-html">attrã€text å’Œ html</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;ul class="list"&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'link'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="s">'changed item'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">html</span><span class="p">(</span><span class="s">'&lt;span&gt;changed item&lt;/span&gt;'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active" name="link"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active" name="link"&gt;changed item&lt;/li&gt;
&lt;li class="item-0 active" name="link"&gt;&lt;span&gt;changed item&lt;/span&gt;&lt;/li&gt;
</code></pre></div></div>

<h3 id="remove">remove()</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div class="wrap"&gt;
    Hello World
&lt;p&gt;This is a paragraph.&lt;/p&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">wrap</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.wrap'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">wrap</span><span class="p">.</span><span class="n">text</span><span class="p">())</span>
<span class="n">wrap</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'p'</span><span class="p">).</span><span class="n">remove</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">wrap</span><span class="p">.</span><span class="n">text</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello World
This is a paragraph.
Hello World
</code></pre></div></div>

<h2 id="ä¼ªç±»é€‰æ‹©å™¨">ä¼ªç±»é€‰æ‹©å™¨</h2>
<p>CSS é€‰æ‹©å™¨ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯å› ä¸ºä»–æ”¯æŒå¤šç§å¤šæ ·çš„ä¼ªç±»é€‰æ‹©å™¨</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:first-child'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:last-child'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:nth-child(2)'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:gt(2)'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:nth-child(2n)'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:contains(second)'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>=======
â€”
layout: post
title: pyquery
subtitle: 
author: Balbo Cheng
categories: python
tags: [reptile]
â€”</p>
<h2 id="åˆå§‹åŒ–-1">åˆå§‹åŒ–</h2>

<h3 id="å­—ç¬¦ä¸²åˆå§‹åŒ–-1">å­—ç¬¦ä¸²åˆå§‹åŒ–</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div&gt;
&lt;ul&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'li'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>

<h3 id="urlåˆå§‹åŒ–-1">URLåˆå§‹åŒ–</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s">'http://balbozheng.com'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'title'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;title&gt;ZhengXuJi&lt;/title&gt;
</code></pre></div></div>
<p>ä¹Ÿå¯ä»¥å†™æˆ</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://balbozheng.com'</span><span class="p">).</span><span class="n">text</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'title'</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="æ–‡ä»¶åˆå§‹åŒ–-1">æ–‡ä»¶åˆå§‹åŒ–</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">'demo.html'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'li'</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="åŸºæœ¬-css-é€‰æ‹©å™¨-1">åŸºæœ¬ CSS é€‰æ‹©å™¨</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'#container .list li'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">doc</span><span class="p">(</span><span class="s">'#container .list li'</span><span class="p">)))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;class 'pyquery.pyquery.PyQuery'&gt;
</code></pre></div></div>

<h2 id="æŸ¥æ‰¾èŠ‚ç‚¹-1">æŸ¥æ‰¾èŠ‚ç‚¹</h2>

<h3 id="å­èŠ‚ç‚¹-1">å­èŠ‚ç‚¹</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">items</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<span class="n">lis</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'li'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">lis</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>fing() çš„æœç´¢èŒƒå›´æ˜¯èŠ‚ç‚¹çš„æ‰€æœ‰å­å­™èŠ‚ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬åªæƒ³æŸ¥æ‰¾å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ children() æ–¹æ³•</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lis</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">children</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">lis</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>or</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lis</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">children</span><span class="p">(</span><span class="s">'.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">lis</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>

<h3 id="çˆ¶èŠ‚ç‚¹-1">çˆ¶èŠ‚ç‚¹</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list'</span><span class="p">)</span>
<span class="n">container</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">parent</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">container</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</code></pre></div></div>
<p>å¦‚æœæƒ³è·å–æŸä¸ªç¥–å…ˆèŠ‚ç‚¹ï¼Œå¯ä»¥ç”¨ parents() æ–¹æ³•</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">items</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list'</span><span class="p">)</span>
<span class="n">parents</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">parents</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parents</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">parents</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</code></pre></div></div>
<p>or</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">items</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list'</span><span class="p">)</span>
<span class="n">parents</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">parents</span><span class="p">(</span><span class="s">".wrap"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parents</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">parents</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</code></pre></div></div>

<h3 id="å…„å¼ŸèŠ‚ç‚¹-1">å…„å¼ŸèŠ‚ç‚¹</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list .item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">siblings</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>or</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list .item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">siblings</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>

<h2 id="éå†-1">éå†</h2>
<p>å¯¹äºå•ä¸ªèŠ‚ç‚¹æ¥è¯´ï¼Œå¯ä»¥ç›´æ¥æ‰“å°è¾“å‡ºï¼Œä¹Ÿå¯ä»¥ç›´æ¥è½¬æˆå­—ç¬¦ä¸²ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.list .item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">li</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>å¯¹äºå¤šä¸ªèŠ‚ç‚¹çš„ç»“æœï¼Œæˆ‘ä»¬å°±éœ€è¦éå†æ¥è·å–</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
<span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">lis</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">li</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'generator'&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
 &lt;class 'pyquery.pyquery.PyQuery'&gt;
</code></pre></div></div>

<h2 id="è·å–ä¿¡æ¯-1">è·å–ä¿¡æ¯</h2>
<h3 id="è·å–å±æ€§-1">è·å–å±æ€§</h3>

<p>æå–æŸä¸ªèŠ‚ç‚¹åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ attr() æ–¹æ³•æ¥è·å–å±æ€§</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active a'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">'href'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt; &lt;class 'pyquery.pyquery.PyQuery'&gt;
link3.html
</code></pre></div></div>
<p>å¦‚æœè¦è·å–å¤šä¸ªèŠ‚ç‚¹å±æ€§ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨éå†</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">a</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">'href'</span><span class="p">))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>link2.html
link3.html
link4.html
link5.html
</code></pre></div></div>

<h3 id="è·å–æ–‡æœ¬-1">è·å–æ–‡æœ¬</h3>
<p>è·å–å…¶å†…éƒ¨æ–‡æœ¬</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active a'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">text</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;
third item
</code></pre></div></div>
<p>å¦‚æœæƒ³è·å–è¿™ä¸ªèŠ‚ç‚¹å†…éƒ¨çš„ HTML æ–‡æœ¬ï¼Œå°±è¦ç”¨ html() æ–¹æ³•</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active a'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">html</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;
&lt;span class="bold"&gt;third item&lt;/span&gt;
</code></pre></div></div>
<p>å¦‚æœæˆ‘ä»¬é€‰ä¸­çš„ç»“æœæ˜¯å¤šä¸ªèŠ‚ç‚¹ï¼Œæƒ³è¦è·å–æ¯ä¸ªèŠ‚ç‚¹çš„å†…éƒ¨ HTML æ–‡æœ¬ï¼Œåˆ™éœ€è¦éå†æ¯ä¸ªèŠ‚ç‚¹ã€‚è€Œ text() æ–¹æ³•ä½ ä¼‘å®‰æ’éå†å°±å¯ä»¥è·å–</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">html</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">text</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">text</span><span class="p">()))</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>first item
first item second item third item fourth item fifth item
&lt;class 'str'&gt;
</code></pre></div></div>

<h2 id="èŠ‚ç‚¹æ“ä½œ-1">èŠ‚ç‚¹æ“ä½œ</h2>
<h3 id="addclass-å’Œ-removeclass-1">addClass å’Œ removeClass</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">remove_class</span><span class="p">(</span><span class="s">'active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">add_class</span><span class="p">(</span><span class="s">'active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<p>addClass() å’Œ removeClass() è¿™äº›æ–¹æ³•å¯ä»¥åŠ¨æ€æ”¹å˜èŠ‚ç‚¹çš„ Class å±æ€§</p>

<h3 id="attrtext-å’Œ-html-1">attrã€text å’Œ html</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;ul class="list"&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.item-0.active'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'link'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="s">'changed item'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span><span class="p">.</span><span class="n">html</span><span class="p">(</span><span class="s">'&lt;span&gt;changed item&lt;/span&gt;'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active" name="link"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active" name="link"&gt;changed item&lt;/li&gt;
&lt;li class="item-0 active" name="link"&gt;&lt;span&gt;changed item&lt;/span&gt;&lt;/li&gt;
</code></pre></div></div>

<h3 id="remove-1">remove()</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div class="wrap"&gt;
    Hello World
&lt;p&gt;This is a paragraph.&lt;/p&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">wrap</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.wrap'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">wrap</span><span class="p">.</span><span class="n">text</span><span class="p">())</span>
<span class="n">wrap</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'p'</span><span class="p">).</span><span class="n">remove</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">wrap</span><span class="p">.</span><span class="n">text</span><span class="p">())</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello World
This is a paragraph.
Hello World
</code></pre></div></div>

<h2 id="ä¼ªç±»é€‰æ‹©å™¨-1">ä¼ªç±»é€‰æ‹©å™¨</h2>
<p>CSS é€‰æ‹©å™¨ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯å› ä¸ºä»–æ”¯æŒå¤šç§å¤šæ ·çš„ä¼ªç±»é€‰æ‹©å™¨</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s">"""
&lt;div class="wrap"&gt;
&lt;div id="container"&gt;
&lt;ul class="list"&gt;
&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="bold"&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:first-child'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:last-child'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:nth-child(2)'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:gt(2)'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:nth-child(2n)'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'li:contains(second)'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li class="item-0"&gt;first item&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
&lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
</code></pre></div></div>
<blockquote>
  <blockquote>
    <blockquote>
      <blockquote>
        <blockquote>
          <blockquote>
            <blockquote>
              <p>e5c77ca (æ–°é¡µé¢)</p>
            </blockquote>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
  </blockquote>
</blockquote>
:ET