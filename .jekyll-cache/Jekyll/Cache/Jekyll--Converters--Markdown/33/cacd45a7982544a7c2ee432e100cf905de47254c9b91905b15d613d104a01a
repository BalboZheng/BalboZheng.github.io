I"¿n<h2 id="-head">Â«Â«Â«&lt; HEAD</h2>
<p>layout:     post
title:      â€œä½¿ç”¨ requestsâ€
subtitle:   â€œâ€
date:       2019-11-15 22:06:25
author:     â€œBalboâ€
header-img: â€œimg/post-bg-2019.jpgâ€
tags:
    - reptile
â€”</p>
<h2 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³•</h2>
<h3 id="å®ä¾‹å¼•å…¥">å®ä¾‹å¼•å…¥</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://baidu.com/'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">cookies</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'requests.models.Response'&gt;
200
&lt;class 'str'&gt;
&lt;html&gt;
&lt;meta http-equiv="refresh" content="0;url=http://www.baidu.com/"&gt;
&lt;/html&gt;
&lt;RequestsCookieJar[]&gt;
</code></pre></div></div>
<h3 id="get-è¯·æ±‚">GET è¯·æ±‚</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://httpbin.org/get'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "args": {}, 
  "headers": {
    "Accept": "*/*", 
    "Accept-Encoding": "gzip, deflate", 
    "Host": "httpbin.org", 
    "User-Agent": "python-requests/2.22.0"
  }, 
  "origin": "113.100.6.27, 113.100.6.27", 
  "url": "https://httpbin.org/get"
}
</code></pre></div></div>
<p>é™„åŠ é¢å¤–è¯·æ±‚:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'name'</span><span class="p">:</span> <span class="s">'germey'</span><span class="p">,</span>
    <span class="s">'age'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://httpbin.org/get'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="æŠ“å–äºŒè¿›åˆ¶æ•°æ®">æŠ“å–äºŒè¿›åˆ¶æ•°æ®</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://github.com/favicon.ico'</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'e://favicon.ico'</span><span class="p">,</span> <span class="s">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="æ·»åŠ -headers">æ·»åŠ  headers</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'User-Agent'</span><span class="p">:</span> <span class="s">'Mozilla/5.0 '</span> \
                         <span class="s">'(Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 '</span> \
                         <span class="s">'(KHTML, like Gecko) Version/5.1 Safari/534.50'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://www.baidu.com'</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<h2 id="é«˜çº§ç”¨æ³•">é«˜çº§ç”¨æ³•</h2>
<h3 id="ä¸Šä¼ æ–‡ä»¶">ä¸Šä¼ æ–‡ä»¶</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s">'file'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="s">'favicon.ico'</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">'http://httpbin.org/post'</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "args": {}, 
  "data": "", 
  "files": {
    "file": "data:application/octet-stream;base64,AAA ... A="
  }, 
  "form": {}, 
  "headers": {
    "Accept": "*/*", 
    "Accept-Encoding": "gzip, deflate", 
    "Content-Length": "6665", 
    "Content-Type": "multipart/form-data; boundary=a07be83274db9e46b0713544033f2f6f", 
    "Host": "httpbin.org", 
    "User-Agent": "python-requests/2.22.0"
  }, 
  "json": null, 
  "origin": "113.100.6.27, 113.100.6.27", 
  "url": "https://httpbin.org/post"
}
</code></pre></div></div>
<h3 id="cookies">Cookies</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># è·å–cookie
</span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://www.baidu.com'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">cookies</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">cookies</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">response</span><span class="p">.</span><span class="n">cookies</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">k</span><span class="o">+</span><span class="s">':'</span><span class="o">+</span><span class="n">v</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;RequestsCookieJar[&lt;Cookie BDORZ=27315 for .baidu.com/&gt;]&gt;
&lt;class 'requests.cookies.RequestsCookieJar'&gt;
BDORZ:27315
</code></pre></div></div>
<h3 id="ä¼šè¯ç»´æŒ">ä¼šè¯ç»´æŒ</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://httpbin.org/cookies/set/number/12345'</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://httpbin.org/cookies'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "cookies": {
    "number": "12345"
  }
}
</code></pre></div></div>
<h3 id="sslè¯ä¹¦éªŒè¯">SSLè¯ä¹¦éªŒè¯</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.packages</span> <span class="kn">import</span> <span class="n">urllib3</span>

<span class="n">urllib3</span><span class="p">.</span><span class="n">disable_warnings</span><span class="p">()</span>  <span class="c1">#ä»urllib3ä¸­æ¶ˆé™¤è­¦å‘Š
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.12306.cn'</span><span class="p">,</span><span class="n">verify</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>  <span class="c1">#è¯ä¹¦éªŒè¯è®¾ä¸ºFALSE
</span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="ä»£ç†è®¾ç½®">ä»£ç†è®¾ç½®</h3>
<p>å¯¹äºæŸäº›ç½‘ç«™ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™è¯·æ±‚å‡ æ¬¡ï¼Œèƒ½æ­£å¸¸è·å–å†…å®¹ã€‚ä½†æ˜¯ä¸€æ—¦å¼€å§‹å¤§è§„æ¨¡çˆ¬å–ï¼Œå¯¹äºå¤§è§„æ¨¡ä¸”é¢‘ç¹çš„è¯·æ±‚ï¼Œç½‘ç«™å¯èƒ½ä¼šå¼¹å‡ºéªŒè¯ç ï¼Œæˆ–è€…è·³è½¬åˆ°ç™»é™†éªŒè¯ç•Œé¢ï¼Œç”šè‡³ä¼šç›´æ¥å°ç¦å®¢æˆ·ç«¯çš„ IPï¼Œå¯¼è‡´ä¸€å®šæ—¶é—´æ®µå†…æ— æ³•è®¿é—®ã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">proxies</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'http'</span><span class="p">:</span> <span class="s">'http://user:password@10.10.1.10:3128'</span><span class="p">,</span>
    <span class="s">'https'</span><span class="p">:</span> <span class="s">'http://user:password@10.10.1.10:1080'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://www.taobao.com'</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="è¶…æ—¶è®¾ç½®">è¶…æ—¶è®¾ç½®</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">ReadTimeout</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://taobao.com'</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ReadTimeout</span> <span class="k">as</span> <span class="n">timeout</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></div>
<p>=======
â€”
layout: post
title: requestsçš„ä½¿ç”¨
subtitle: 
author: Balbo Cheng
categories: python
tags: [reptile]
â€”</p>
<h2 id="åŸºæœ¬ç”¨æ³•-1">åŸºæœ¬ç”¨æ³•</h2>
<h3 id="å®ä¾‹å¼•å…¥-1">å®ä¾‹å¼•å…¥</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://baidu.com/'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">cookies</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'requests.models.Response'&gt;
200
&lt;class 'str'&gt;
&lt;html&gt;
&lt;meta http-equiv="refresh" content="0;url=http://www.baidu.com/"&gt;
&lt;/html&gt;
&lt;RequestsCookieJar[]&gt;
</code></pre></div></div>
<h3 id="get-è¯·æ±‚-1">GET è¯·æ±‚</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://httpbin.org/get'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "args": {}, 
  "headers": {
    "Accept": "*/*", 
    "Accept-Encoding": "gzip, deflate", 
    "Host": "httpbin.org", 
    "User-Agent": "python-requests/2.22.0"
  }, 
  "origin": "113.100.6.27, 113.100.6.27", 
  "url": "https://httpbin.org/get"
}
</code></pre></div></div>
<p>é™„åŠ é¢å¤–è¯·æ±‚:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'name'</span><span class="p">:</span> <span class="s">'germey'</span><span class="p">,</span>
    <span class="s">'age'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://httpbin.org/get'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="æŠ“å–äºŒè¿›åˆ¶æ•°æ®-1">æŠ“å–äºŒè¿›åˆ¶æ•°æ®</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://github.com/favicon.ico'</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'e://favicon.ico'</span><span class="p">,</span> <span class="s">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="æ·»åŠ -headers-1">æ·»åŠ  headers</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'User-Agent'</span><span class="p">:</span> <span class="s">'Mozilla/5.0 '</span> \
                         <span class="s">'(Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 '</span> \
                         <span class="s">'(KHTML, like Gecko) Version/5.1 Safari/534.50'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://www.baidu.com'</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<h2 id="é«˜çº§ç”¨æ³•-1">é«˜çº§ç”¨æ³•</h2>
<h3 id="ä¸Šä¼ æ–‡ä»¶-1">ä¸Šä¼ æ–‡ä»¶</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s">'file'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="s">'favicon.ico'</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">'http://httpbin.org/post'</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "args": {}, 
  "data": "", 
  "files": {
    "file": "data:application/octet-stream;base64,AAA ... A="
  }, 
  "form": {}, 
  "headers": {
    "Accept": "*/*", 
    "Accept-Encoding": "gzip, deflate", 
    "Content-Length": "6665", 
    "Content-Type": "multipart/form-data; boundary=a07be83274db9e46b0713544033f2f6f", 
    "Host": "httpbin.org", 
    "User-Agent": "python-requests/2.22.0"
  }, 
  "json": null, 
  "origin": "113.100.6.27, 113.100.6.27", 
  "url": "https://httpbin.org/post"
}
</code></pre></div></div>
<h3 id="cookies-1">Cookies</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># è·å–cookie
</span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://www.baidu.com'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">cookies</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">cookies</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">response</span><span class="p">.</span><span class="n">cookies</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">k</span><span class="o">+</span><span class="s">':'</span><span class="o">+</span><span class="n">v</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;RequestsCookieJar[&lt;Cookie BDORZ=27315 for .baidu.com/&gt;]&gt;
&lt;class 'requests.cookies.RequestsCookieJar'&gt;
BDORZ:27315
</code></pre></div></div>
<h3 id="ä¼šè¯ç»´æŒ-1">ä¼šè¯ç»´æŒ</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://httpbin.org/cookies/set/number/12345'</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://httpbin.org/cookies'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "cookies": {
    "number": "12345"
  }
}
</code></pre></div></div>
<h3 id="sslè¯ä¹¦éªŒè¯-1">SSLè¯ä¹¦éªŒè¯</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.packages</span> <span class="kn">import</span> <span class="n">urllib3</span>

<span class="n">urllib3</span><span class="p">.</span><span class="n">disable_warnings</span><span class="p">()</span>  <span class="c1">#ä»urllib3ä¸­æ¶ˆé™¤è­¦å‘Š
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.12306.cn'</span><span class="p">,</span><span class="n">verify</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>  <span class="c1">#è¯ä¹¦éªŒè¯è®¾ä¸ºFALSE
</span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="ä»£ç†è®¾ç½®-1">ä»£ç†è®¾ç½®</h3>
<p>å¯¹äºæŸäº›ç½‘ç«™ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™è¯·æ±‚å‡ æ¬¡ï¼Œèƒ½æ­£å¸¸è·å–å†…å®¹ã€‚ä½†æ˜¯ä¸€æ—¦å¼€å§‹å¤§è§„æ¨¡çˆ¬å–ï¼Œå¯¹äºå¤§è§„æ¨¡ä¸”é¢‘ç¹çš„è¯·æ±‚ï¼Œç½‘ç«™å¯èƒ½ä¼šå¼¹å‡ºéªŒè¯ç ï¼Œæˆ–è€…è·³è½¬åˆ°ç™»é™†éªŒè¯ç•Œé¢ï¼Œç”šè‡³ä¼šç›´æ¥å°ç¦å®¢æˆ·ç«¯çš„ IPï¼Œå¯¼è‡´ä¸€å®šæ—¶é—´æ®µå†…æ— æ³•è®¿é—®ã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">proxies</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'http'</span><span class="p">:</span> <span class="s">'http://user:password@10.10.1.10:3128'</span><span class="p">,</span>
    <span class="s">'https'</span><span class="p">:</span> <span class="s">'http://user:password@10.10.1.10:1080'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://www.taobao.com'</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="è¶…æ—¶è®¾ç½®-1">è¶…æ—¶è®¾ç½®</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">ReadTimeout</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://taobao.com'</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ReadTimeout</span> <span class="k">as</span> <span class="n">timeout</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></div>
<blockquote>
  <blockquote>
    <blockquote>
      <blockquote>
        <blockquote>
          <blockquote>
            <blockquote>
              <p>e5c77ca (æ–°é¡µé¢)</p>
            </blockquote>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
  </blockquote>
</blockquote>
:ET