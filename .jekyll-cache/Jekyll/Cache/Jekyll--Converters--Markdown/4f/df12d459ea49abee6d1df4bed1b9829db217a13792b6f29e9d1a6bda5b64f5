I"º»<p>Â«Â«Â«&lt; HEAD
Â«Â«Â«&lt; HEAD:_posts/2019-09-06-mybatis-generator.md
â€”
layout:     post
title:      â€œMyBatis Generatorâ€
subtitle:   â€œMyBatisé€†å‘å·¥ç¨‹â€
date:       2019-09-06 12:30:11
author:     â€œBalboâ€
header-img: â€œimg/post-bg-2019.jpgâ€
tags:
    - mybatis
    - java
=======
â€”
layout: post
title: MyBatis Generator
subtitle: MyBatisé€†å‘å·¥ç¨‹
author: Balbo Cheng
categories: java
tags: [mybatis]</p>
<blockquote>
  <blockquote>
    <blockquote>
      <blockquote>
        <blockquote>
          <blockquote>
            <blockquote>
              <h2 id="e5c77ca-æ–°é¡µé¢">e5c77ca (æ–°é¡µé¢)</h2>
              <h2 id="ä»€ä¹ˆæ˜¯mybatisçš„é€†å‘å·¥ç¨‹">ä»€ä¹ˆæ˜¯MyBatisçš„é€†å‘å·¥ç¨‹ï¼Ÿ</h2>
              <p>MyBatisé€†å‘å·¥ç¨‹æ˜¯æŒ‡ç”¨æ•°æ®åº“çš„è¡¨ç›´æ¥ç”ŸæˆJavaä»£ç ï¼Œåˆ©ç”¨MyBatiså®˜æ–¹æä¾›çš„é€†å‘å·¥ç¨‹ï¼Œå¯ä»¥é’ˆå¯¹å•è¡¨è‡ªåŠ¨ç”ŸMyBatisæ‰§è¡Œæ‰€éœ€è¦çš„ä»£ç ï¼ˆå¦‚poç±»ï¼Œmapper.javaå’Œmapper.xmlï¼‰</p>
            </blockquote>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
  </blockquote>
</blockquote>

<h2 id="ç”Ÿæˆé€†å‘å·¥ç¨‹">ç”Ÿæˆé€†å‘å·¥ç¨‹</h2>
<p>ç”Ÿæˆé€†å‘å·¥ç¨‹çš„æ–¹å¼æœ‰å¤šç§ï¼Œæ¨èä½¿ç”¨Javaç¨‹åºå’ŒXMLé…ç½®æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œå®ç°ã€‚</p>

<h2 id="mybatisé€†å‘å·¥ç¨‹">MyBatisé€†å‘å·¥ç¨‹</h2>
<h3 id="æ•°æ®åº“é…ç½®æ–‡ä»¶dbproperties">æ•°æ®åº“é…ç½®æ–‡ä»¶db.properties</h3>

<p>è¿™é‡Œä¸ºäº†è§£è€¦ï¼Œå°†æ•°æ®åº“ä¿¡æ¯å’Œè¦ç”Ÿæˆçš„è¡¨çš„ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªdb.propertiesæ–‡ä»¶é‡Œ</p>

<p>jdbcè¿æ¥æ•°æ®åº“é…ç½®ä¿¡æ¯</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jdbc</span><span class="o">.</span><span class="na">driver</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="na">mysql</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">Driver</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">url</span> <span class="o">=</span> <span class="nl">jdbc:mysql:</span><span class="c1">//localhost:3306/mybatis?characterEncoding=utf-8</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">root</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="mi">123456</span>

<span class="err">#</span><span class="n">æ•°æ®åº“ä¸­è¦ç”Ÿæˆçš„è¡¨</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">items</span> <span class="o">=</span> <span class="n">items</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">orders</span> <span class="o">=</span> <span class="n">orders</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">orderdetail</span> <span class="o">=</span> <span class="n">orderdetail</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">user</span> <span class="o">=</span> <span class="n">user</span>
</code></pre></div></div>
<h3 id="ç”Ÿæˆä»£ç é…ç½®æ–‡ä»¶generateconfigxml">ç”Ÿæˆä»£ç é…ç½®æ–‡ä»¶generateConfig.xml</h3>
<p>åœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®è¦ç”Ÿæˆå“ªäº›è¡¨çš„ä¿¡æ¯ï¼Œä»¥åŠç”Ÿæˆçš„POç±»ï¼Œmapper.xmlå’Œmapper.javaæ‰€åœ¨çš„åŒ…ï¼Œè¿™é‡Œä¸ºäº†ä»Šåèƒ½ç”¨MyBatisçš„ä»£ç†è¿›è¡Œå¼€å‘ï¼Œè®©mapper.xmlå’Œmapper.javaåœ¨åŒä¸€ä¸ªåŒ…ä¸­ã€‚</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE generatorConfiguration
PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span>
<span class="nt">&lt;generatorConfiguration&gt;</span>

<span class="c">&lt;!-- mybatisçš„é…ç½®æ–‡ä»¶ --&gt;</span>

<span class="nt">&lt;properties</span> <span class="na">resource=</span><span class="s">"db.properties"</span><span class="nt">/&gt;</span>

<span class="c">&lt;!--æŒ‡å®šç‰¹å®šæ•°æ®åº“çš„jdbcé©±åŠ¨jaråŒ…çš„ä½ç½® --&gt;</span>
<span class="nt">&lt;classPathEntry</span> <span class="na">location=</span><span class="s">"${jdbc.driverLocation}"</span><span class="nt">/&gt;</span>

<span class="c">&lt;!--classPathEntry 
location="D:\zngkpt\m2\repository\mysql\mysql-connector-java\5.1.40\mysql-connector-java-5.1.40.jar" 
--&gt;</span>
<span class="nt">&lt;context</span> <span class="na">id=</span><span class="s">"context1"</span> <span class="na">targetRuntime=</span><span class="s">"MyBatis3"</span><span class="nt">&gt;</span>

<span class="nt">&lt;commentGenerator&gt;</span>
<span class="c">&lt;!-- å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š --&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"suppressAllComments"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/commentGenerator&gt;</span>

<span class="c">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
<span class="nt">&lt;jdbcConnection</span> <span class="na">driverClass=</span><span class="s">"${jdbc.driverClass}"</span>
<span class="na">connectionURL=</span><span class="s">"${jdbc.connectionURL}"</span>
<span class="na">userId=</span><span class="s">"${jdbc.userId}"</span>
<span class="na">password=</span><span class="s">"${jdbc.password}"</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!--jdbcConnection driverClass="com.mysql.jdbc.Driver"
connectionURL="jdbc:mysql://localhost:3306/test"
userId="root"
password="mysql" /--&gt;</span>

<span class="c">&lt;!-- éå¿…éœ€ï¼Œç±»å‹å¤„ç†å™¨ï¼Œåœ¨æ•°æ®åº“ç±»å‹å’Œjavaç±»å‹ä¹‹é—´çš„è½¬æ¢æ§åˆ¶--&gt;</span>
<span class="nt">&lt;javaTypeResolver&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"forceBigDecimals"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/javaTypeResolver&gt;</span>

<span class="c">&lt;!--é…ç½®ç”Ÿæˆçš„å®ä½“åŒ…
targetPackageï¼šç”Ÿæˆçš„å®ä½“åŒ…ä½ç½®ï¼Œé»˜è®¤å­˜æ”¾åœ¨srcç›®å½•ä¸‹
targetProjectï¼šç›®æ ‡å·¥ç¨‹å
--&gt;</span>
<span class="c">&lt;!-- æŒ‡å®šjavabeanç”Ÿæˆçš„ä½ç½® --&gt;</span>
<span class="nt">&lt;javaModelGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.maven.bean"</span> <span class="na">targetProject=</span><span class="s">"..\ssm_crud\src\main\java"</span><span class="nt">&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"trimStrings"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/javaModelGenerator&gt;</span>

<span class="nt">&lt;sqlMapGenerator</span> <span class="na">targetPackage=</span><span class="s">"mapper"</span> <span class="na">targetProject=</span><span class="s">"..\ssm_crud\src\main\resources"</span><span class="nt">&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/sqlMapGenerator&gt;</span>

<span class="nt">&lt;javaClientGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.maven.dao"</span> <span class="na">type=</span><span class="s">"XMLMAPPER"</span>
 <span class="na">targetProject=</span><span class="s">"..\ssm_crud\src\main\java"</span><span class="nt">&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/javaClientGenerator&gt;</span>

<span class="c">&lt;!-- é…ç½®è¡¨
schemaï¼šä¸ç”¨å¡«å†™
tableName: è¡¨å
enableCountByExampleã€enableSelectByExampleã€enableDeleteByExampleã€
enableUpdateByExampleã€selectByExampleQueryIdï¼š
å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„ä¾‹å­
--&gt;</span>

<span class="nt">&lt;table</span> <span class="na">tableName=</span><span class="s">"tbl_emp"</span> <span class="na">domainObjectName=</span><span class="s">"Employee"</span> 
<span class="na">enableCountByExample=</span><span class="s">"true"</span> <span class="na">enableDeleteByExample=</span><span class="s">"true"</span>
<span class="na">enableSelectByExample=</span><span class="s">"true"</span> <span class="na">enableUpdateByExample=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;table</span> <span class="na">tableName=</span><span class="s">"tbl_dept"</span> <span class="na">domainObjectName=</span><span class="s">"Department"</span> 
<span class="na">enableCountByExample=</span><span class="s">"true"</span> <span class="na">enableDeleteByExample=</span><span class="s">"true"</span>
<span class="na">enableSelectByExample=</span><span class="s">"true"</span> <span class="na">enableUpdateByExample=</span><span class="s">"true"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/context&gt;</span>
<span class="nt">&lt;/generatorConfiguration&gt;</span>
</code></pre></div></div>
<h3 id="æ‰§è¡Œç”Ÿæˆç¨‹åºgeneratesqlmapjava">æ‰§è¡Œç”Ÿæˆç¨‹åºGenerateSqlMap.java</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.mybatis.generator.api.MyBatisGenerator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.generator.config.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.generator.config.xml.ConfigurationParser</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.generator.internal.DefaultShellCallback</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GeneratorSqlmap</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">generator</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">warnings</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;();</span>
        <span class="kt">boolean</span> <span class="n">overwrite</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="c1">//æŒ‡å®š é€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶</span>
        <span class="nc">File</span> <span class="n">configFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"config/generatorConfig.xml"</span><span class="o">);</span>
        <span class="nc">ConfigurationParser</span> <span class="n">cp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConfigurationParser</span><span class="o">(</span><span class="n">warnings</span><span class="o">);</span>
        <span class="nc">Configuration</span> <span class="n">config</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="na">parseConfiguration</span><span class="o">(</span><span class="n">configFile</span><span class="o">);</span>
        <span class="nc">DefaultShellCallback</span> <span class="n">callback</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultShellCallback</span><span class="o">(</span><span class="n">overwrite</span><span class="o">);</span>
        <span class="nc">MyBatisGenerator</span> <span class="n">myBatisGenerator</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyBatisGenerator</span><span class="o">(</span><span class="n">config</span><span class="o">,</span>
        <span class="n">callback</span><span class="o">,</span> <span class="n">warnings</span><span class="o">);</span>
        <span class="n">myBatisGenerator</span><span class="o">.</span><span class="na">generate</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>

    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
        <span class="nc">GeneratorSqlmap</span> <span class="n">generatorSqlmap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GeneratorSqlmap</span><span class="o">();</span>
        <span class="n">generatorSqlmap</span><span class="o">.</span><span class="na">generator</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p><strong>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®å¦å†™ä¸€ä¸ªprojectæ¥å®ç°MyBatisçš„é€†å‘å·¥ç¨‹</strong></p>

<p>ç„¶åå†ä»ä¸­æŒ‘é€‰å‡ºå®é™…éœ€è¦çš„POJOç±»å’Œmapper.xmlï¼Œåƒä¸‡ä¸è¦åœ¨åŸæœ‰é¡¹ç›®ä¸­ç›´æ¥ç”Ÿæˆï¼Œé‚£æ ·ä¼šæ¯”è¾ƒä¹±ã€‚</p>

<p>MyBatisé€†å‘å·¥ç¨‹æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥åšä¸ºæ¨¡æ¿å·¥ç¨‹è¿›è¡Œåº”ç”¨ï¼Œåªéœ€è¦æ”¹ä¸€ä¸‹æ•°æ®åº“åï¼Œè¡¨åå’ŒåŒ…çš„è·¯å¾„å°±è¡Œäº†ï¼Œè¿™é‡Œæä¾›é¡¹ç›®ä¸‹è½½åœ°å€ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>

<h2 id="åœ¨mavenå·¥ç¨‹ä¸­çš„resourceä¸­åˆ›å»ºgeneratorconfigxml">åœ¨mavenå·¥ç¨‹ä¸­çš„resourceä¸­åˆ›å»ºgeneratorConfig.xml</h2>

<h3 id="é…ç½®">é…ç½®</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE generatorConfiguration
  PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
  "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span>

<span class="nt">&lt;generatorConfiguration&gt;</span>
   <span class="c">&lt;!--mysql è¿æ¥æ•°æ®åº“jar è¿™é‡Œé€‰æ‹©è‡ªå·±æœ¬åœ°ä½ç½®--&gt;</span>
   <span class="nt">&lt;classPathEntry</span> <span class="na">location=</span><span class="s">"D:/mysql-connector-java-5.1.20-bin.jar"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;context</span> <span class="na">id=</span><span class="s">"testTables"</span> <span class="na">targetRuntime=</span><span class="s">"MyBatis3"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;commentGenerator&gt;</span>
         <span class="c">&lt;!-- æ˜¯å¦å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š trueï¼šæ˜¯ ï¼š false:å¦ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"suppressAllComments"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/commentGenerator&gt;</span>
      <span class="c">&lt;!--æ•°æ®åº“è¿æ¥çš„ä¿¡æ¯ï¼šé©±åŠ¨ç±»ã€è¿æ¥åœ°å€ã€ç”¨æˆ·åã€å¯†ç  --&gt;</span>
      <span class="nt">&lt;jdbcConnection</span> <span class="na">driverClass=</span><span class="s">"com.mysql.jdbc.Driver"</span>
         <span class="na">connectionURL=</span><span class="s">"jdbc:mysql://localhost:3306/ecps"</span> <span class="na">userId=</span><span class="s">"root"</span>
         <span class="na">password=</span><span class="s">"root"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/jdbcConnection&gt;</span>
      <span class="c">&lt;!-- é»˜è®¤falseï¼ŒæŠŠJDBC DECIMAL å’Œ NUMERIC ç±»å‹è§£æä¸º Integerï¼Œä¸º trueæ—¶æŠŠJDBC DECIMAL å’Œ
         NUMERIC ç±»å‹è§£æä¸ºjava.math.BigDecimal --&gt;</span>
      <span class="nt">&lt;javaTypeResolver&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"forceBigDecimals"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/javaTypeResolver&gt;</span>

      <span class="c">&lt;!-- targetProject:ç”ŸæˆPOç±»çš„ä½ç½® --&gt;</span>
      <span class="nt">&lt;javaModelGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.ecps.seckill.pojo"</span>
         <span class="na">targetProject=</span><span class="s">"src/main/java"</span><span class="nt">&gt;</span>
         <span class="c">&lt;!-- enableSubPackages:æ˜¯å¦è®©schemaä½œä¸ºåŒ…çš„åç¼€ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
         <span class="c">&lt;!-- ä»æ•°æ®åº“è¿”å›çš„å€¼è¢«æ¸…ç†å‰åçš„ç©ºæ ¼ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"trimStrings"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/javaModelGenerator&gt;</span>
        <span class="c">&lt;!-- targetProject:mapperæ˜ å°„æ–‡ä»¶ç”Ÿæˆçš„ä½ç½®
           å¦‚æœmavenå·¥ç¨‹åªæ˜¯å•ç‹¬çš„ä¸€ä¸ªå·¥ç¨‹ï¼ŒtargetProject="src/main/java"
           è‹¥æœmavenå·¥ç¨‹æ˜¯åˆ†æ¨¡å—çš„å·¥ç¨‹ï¼ŒtargetProject="æ‰€å±æ¨¡å—çš„åç§°"ï¼Œä¾‹å¦‚ï¼š
           targetProject="ecps-manager-mapper"ï¼Œä¸‹åŒ--&gt;</span>
      <span class="nt">&lt;sqlMapGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.ecps.seckill.mapper"</span>
         <span class="na">targetProject=</span><span class="s">"src/main/java"</span><span class="nt">&gt;</span>
         <span class="c">&lt;!-- enableSubPackages:æ˜¯å¦è®©schemaä½œä¸ºåŒ…çš„åç¼€ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/sqlMapGenerator&gt;</span>
      <span class="c">&lt;!-- targetPackageï¼šmapperæ¥å£ç”Ÿæˆçš„ä½ç½® --&gt;</span>
      <span class="nt">&lt;javaClientGenerator</span> <span class="na">type=</span><span class="s">"XMLMAPPER"</span>
         <span class="na">targetPackage=</span><span class="s">"com.ecps.seckill.mapper"</span>
         <span class="na">targetProject=</span><span class="s">"src/main/java"</span><span class="nt">&gt;</span>
         <span class="c">&lt;!-- enableSubPackages:æ˜¯å¦è®©schemaä½œä¸ºåŒ…çš„åç¼€ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/javaClientGenerator&gt;</span>
      <span class="c">&lt;!-- æŒ‡å®šæ•°æ®åº“è¡¨ --&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">schema=</span><span class="s">""</span> <span class="na">tableName=</span><span class="s">"seckill"</span><span class="nt">&gt;&lt;/table&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">schema=</span><span class="s">""</span> <span class="na">tableName=</span><span class="s">"success_killed"</span><span class="nt">&gt;&lt;/table&gt;</span>   
   <span class="nt">&lt;/context&gt;</span>
<span class="nt">&lt;/generatorConfiguration&gt;</span>
</code></pre></div></div>

<h3 id="é…ç½®pomxml">é…ç½®pom.xml</h3>

<p>åœ¨pom.xmlä¸­ä½ç½®mybatis-generatorçš„æ’ä»¶</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.mybatis.generator<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>mybatis-generator-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
            <span class="c">&lt;!--é…ç½®æ–‡ä»¶çš„ä½ç½®--&gt;</span>      
            <span class="nt">&lt;configurationFile&gt;</span>src/main/resources/generatorConfig.xml<span class="nt">&lt;/configurationFile&gt;</span>
                <span class="nt">&lt;verbose&gt;</span>true<span class="nt">&lt;/verbose&gt;</span>
                <span class="nt">&lt;overwrite&gt;</span>true<span class="nt">&lt;/overwrite&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;executions&gt;</span>
                <span class="nt">&lt;execution&gt;</span>
                    <span class="nt">&lt;id&gt;</span>Generate MyBatis Artifacts<span class="nt">&lt;/id&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                        <span class="nt">&lt;goal&gt;</span>generate<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                <span class="nt">&lt;/execution&gt;</span>
            <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;dependencies&gt;</span>
                <span class="nt">&lt;dependency&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>org.mybatis.generator<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>mybatis-generator-core<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;/dependency&gt;</span>
            <span class="nt">&lt;/dependencies&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div>

<h3 id="ç”Ÿæˆå¯¹è±¡çš„ä¸¤ç§æ–¹å¼">ç”Ÿæˆå¯¹è±¡çš„ä¸¤ç§æ–¹å¼</h3>

<p><strong># ä½¿ç”¨ideaçš„mavenæ’ä»¶ç›´æ¥å¿«é€Ÿç”Ÿæˆ</strong></p>

<ol>
  <li>åœ¨å®Œæˆä»¥ä¸Šä¸¤æ­¥ä¹‹åã€‚å°±ä¼šåœ¨ideaä¸­çœ‹åˆ°ï¼šç›´æ¥ç‚¹å‡»mybatis-generator:generateå°±å¯ç”Ÿæˆ</li>
</ol>

<p><strong># åœ¨Intellij IDEAæ·»åŠ ä¸€ä¸ªâ€œRunè¿è¡Œâ€é€‰é¡¹ï¼Œä½¿ç”¨mavenè¿è¡Œmybatis-generator-maven-pluginæ’ä»¶</strong></p>

<ol>
  <li>
    <p>é€‰æ‹©é…ç½®edit configuration</p>
  </li>
  <li>
    <p>åˆ›å»ºmavenè¿è¡Œé¡¹</p>
  </li>
  <li>
    <p>é…ç½®å‘½ä»¤ mybatis-generator:generate -e</p>
  </li>
</ol>

<p>Â«Â«Â«&lt; HEAD</p>
<ol>
  <li>
    <h1 id="è¿è¡Œ">è¿è¡Œ</h1>
    <hr />
    <p>title: MyBatisé€†å‘å·¥ç¨‹
date: 2019-09-06 12:30:11
tags: [â€˜mybatisâ€™, â€˜javaâ€™]
categories: Mybatis
layout:     post
title:      â€œMyBatis Generatorâ€
subtitle:   â€œMyBatisé€†å‘å·¥ç¨‹â€
date:       2019-09-06 12:30:11
author:     â€œBalboâ€
header-img: â€œimg/post-bg-2019.jpgâ€
catalog: true
tags:</p>
    <ul>
      <li>mybatis</li>
      <li>
        <h2 id="java">java</h2>
        <h2 id="ä»€ä¹ˆæ˜¯mybatisçš„é€†å‘å·¥ç¨‹-1">ä»€ä¹ˆæ˜¯MyBatisçš„é€†å‘å·¥ç¨‹ï¼Ÿ</h2>
        <p>MyBatisé€†å‘å·¥ç¨‹æ˜¯æŒ‡ç”¨æ•°æ®åº“çš„è¡¨ç›´æ¥ç”ŸæˆJavaä»£ç ï¼Œåˆ©ç”¨MyBatiså®˜æ–¹æä¾›çš„é€†å‘å·¥ç¨‹ï¼Œå¯ä»¥é’ˆå¯¹å•è¡¨è‡ªåŠ¨ç”ŸMyBatisæ‰§è¡Œæ‰€éœ€è¦çš„ä»£ç ï¼ˆå¦‚poç±»ï¼Œmapper.javaå’Œmapper.xmlï¼‰</p>
      </li>
    </ul>
  </li>
</ol>

<h2 id="ç”Ÿæˆé€†å‘å·¥ç¨‹-1">ç”Ÿæˆé€†å‘å·¥ç¨‹</h2>
<p>ç”Ÿæˆé€†å‘å·¥ç¨‹çš„æ–¹å¼æœ‰å¤šç§ï¼Œæ¨èä½¿ç”¨Javaç¨‹åºå’ŒXMLé…ç½®æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œå®ç°ã€‚</p>

<h2 id="mybatisé€†å‘å·¥ç¨‹-1">MyBatisé€†å‘å·¥ç¨‹</h2>
<h3 id="æ•°æ®åº“é…ç½®æ–‡ä»¶dbproperties-1">æ•°æ®åº“é…ç½®æ–‡ä»¶db.properties</h3>

<p>è¿™é‡Œä¸ºäº†è§£è€¦ï¼Œå°†æ•°æ®åº“ä¿¡æ¯å’Œè¦ç”Ÿæˆçš„è¡¨çš„ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªdb.propertiesæ–‡ä»¶é‡Œ</p>

<p>jdbcè¿æ¥æ•°æ®åº“é…ç½®ä¿¡æ¯</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jdbc</span><span class="o">.</span><span class="na">driver</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="na">mysql</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">Driver</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">url</span> <span class="o">=</span> <span class="nl">jdbc:mysql:</span><span class="c1">//localhost:3306/mybatis?characterEncoding=utf-8</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">root</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="mi">123456</span>

<span class="err">#</span><span class="n">æ•°æ®åº“ä¸­è¦ç”Ÿæˆçš„è¡¨</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">items</span> <span class="o">=</span> <span class="n">items</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">orders</span> <span class="o">=</span> <span class="n">orders</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">orderdetail</span> <span class="o">=</span> <span class="n">orderdetail</span>
<span class="n">jdbc</span><span class="o">.</span><span class="na">table</span><span class="o">.</span><span class="na">user</span> <span class="o">=</span> <span class="n">user</span>
</code></pre></div></div>
<h3 id="ç”Ÿæˆä»£ç é…ç½®æ–‡ä»¶generateconfigxml-1">ç”Ÿæˆä»£ç é…ç½®æ–‡ä»¶generateConfig.xml</h3>
<p>åœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®è¦ç”Ÿæˆå“ªäº›è¡¨çš„ä¿¡æ¯ï¼Œä»¥åŠç”Ÿæˆçš„POç±»ï¼Œmapper.xmlå’Œmapper.javaæ‰€åœ¨çš„åŒ…ï¼Œè¿™é‡Œä¸ºäº†ä»Šåèƒ½ç”¨MyBatisçš„ä»£ç†è¿›è¡Œå¼€å‘ï¼Œè®©mapper.xmlå’Œmapper.javaåœ¨åŒä¸€ä¸ªåŒ…ä¸­ã€‚</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE generatorConfiguration
PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span>
<span class="nt">&lt;generatorConfiguration&gt;</span>

<span class="c">&lt;!-- mybatisçš„é…ç½®æ–‡ä»¶ --&gt;</span>

<span class="nt">&lt;properties</span> <span class="na">resource=</span><span class="s">"db.properties"</span><span class="nt">/&gt;</span>

<span class="c">&lt;!--æŒ‡å®šç‰¹å®šæ•°æ®åº“çš„jdbcé©±åŠ¨jaråŒ…çš„ä½ç½® --&gt;</span>
<span class="nt">&lt;classPathEntry</span> <span class="na">location=</span><span class="s">"${jdbc.driverLocation}"</span><span class="nt">/&gt;</span>

<span class="c">&lt;!--classPathEntry 
location="D:\zngkpt\m2\repository\mysql\mysql-connector-java\5.1.40\mysql-connector-java-5.1.40.jar" 
--&gt;</span>
<span class="nt">&lt;context</span> <span class="na">id=</span><span class="s">"context1"</span> <span class="na">targetRuntime=</span><span class="s">"MyBatis3"</span><span class="nt">&gt;</span>

<span class="nt">&lt;commentGenerator&gt;</span>
<span class="c">&lt;!-- å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š --&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"suppressAllComments"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/commentGenerator&gt;</span>

<span class="c">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
<span class="nt">&lt;jdbcConnection</span> <span class="na">driverClass=</span><span class="s">"${jdbc.driverClass}"</span>
<span class="na">connectionURL=</span><span class="s">"${jdbc.connectionURL}"</span>
<span class="na">userId=</span><span class="s">"${jdbc.userId}"</span>
<span class="na">password=</span><span class="s">"${jdbc.password}"</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!--jdbcConnection driverClass="com.mysql.jdbc.Driver"
connectionURL="jdbc:mysql://localhost:3306/test"
userId="root"
password="mysql" /--&gt;</span>

<span class="c">&lt;!-- éå¿…éœ€ï¼Œç±»å‹å¤„ç†å™¨ï¼Œåœ¨æ•°æ®åº“ç±»å‹å’Œjavaç±»å‹ä¹‹é—´çš„è½¬æ¢æ§åˆ¶--&gt;</span>
<span class="nt">&lt;javaTypeResolver&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"forceBigDecimals"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/javaTypeResolver&gt;</span>

<span class="c">&lt;!--é…ç½®ç”Ÿæˆçš„å®ä½“åŒ…
targetPackageï¼šç”Ÿæˆçš„å®ä½“åŒ…ä½ç½®ï¼Œé»˜è®¤å­˜æ”¾åœ¨srcç›®å½•ä¸‹
targetProjectï¼šç›®æ ‡å·¥ç¨‹å
--&gt;</span>
<span class="c">&lt;!-- æŒ‡å®šjavabeanç”Ÿæˆçš„ä½ç½® --&gt;</span>
<span class="nt">&lt;javaModelGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.maven.bean"</span> <span class="na">targetProject=</span><span class="s">"..\ssm_crud\src\main\java"</span><span class="nt">&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"trimStrings"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/javaModelGenerator&gt;</span>

<span class="nt">&lt;sqlMapGenerator</span> <span class="na">targetPackage=</span><span class="s">"mapper"</span> <span class="na">targetProject=</span><span class="s">"..\ssm_crud\src\main\resources"</span><span class="nt">&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/sqlMapGenerator&gt;</span>

<span class="nt">&lt;javaClientGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.maven.dao"</span> <span class="na">type=</span><span class="s">"XMLMAPPER"</span>
 <span class="na">targetProject=</span><span class="s">"..\ssm_crud\src\main\java"</span><span class="nt">&gt;</span>
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/javaClientGenerator&gt;</span>

<span class="c">&lt;!-- é…ç½®è¡¨
schemaï¼šä¸ç”¨å¡«å†™
tableName: è¡¨å
enableCountByExampleã€enableSelectByExampleã€enableDeleteByExampleã€
enableUpdateByExampleã€selectByExampleQueryIdï¼š
å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„ä¾‹å­
--&gt;</span>

<span class="nt">&lt;table</span> <span class="na">tableName=</span><span class="s">"tbl_emp"</span> <span class="na">domainObjectName=</span><span class="s">"Employee"</span> 
<span class="na">enableCountByExample=</span><span class="s">"true"</span> <span class="na">enableDeleteByExample=</span><span class="s">"true"</span>
<span class="na">enableSelectByExample=</span><span class="s">"true"</span> <span class="na">enableUpdateByExample=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;table</span> <span class="na">tableName=</span><span class="s">"tbl_dept"</span> <span class="na">domainObjectName=</span><span class="s">"Department"</span> 
<span class="na">enableCountByExample=</span><span class="s">"true"</span> <span class="na">enableDeleteByExample=</span><span class="s">"true"</span>
<span class="na">enableSelectByExample=</span><span class="s">"true"</span> <span class="na">enableUpdateByExample=</span><span class="s">"true"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/context&gt;</span>
<span class="nt">&lt;/generatorConfiguration&gt;</span>
</code></pre></div></div>
<h3 id="æ‰§è¡Œç”Ÿæˆç¨‹åºgeneratesqlmapjava-1">æ‰§è¡Œç”Ÿæˆç¨‹åºGenerateSqlMap.java</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.mybatis.generator.api.MyBatisGenerator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.generator.config.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.generator.config.xml.ConfigurationParser</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.generator.internal.DefaultShellCallback</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GeneratorSqlmap</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">generator</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">warnings</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;();</span>
        <span class="kt">boolean</span> <span class="n">overwrite</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="c1">//æŒ‡å®š é€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶</span>
        <span class="nc">File</span> <span class="n">configFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"config/generatorConfig.xml"</span><span class="o">);</span>
        <span class="nc">ConfigurationParser</span> <span class="n">cp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConfigurationParser</span><span class="o">(</span><span class="n">warnings</span><span class="o">);</span>
        <span class="nc">Configuration</span> <span class="n">config</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="na">parseConfiguration</span><span class="o">(</span><span class="n">configFile</span><span class="o">);</span>
        <span class="nc">DefaultShellCallback</span> <span class="n">callback</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultShellCallback</span><span class="o">(</span><span class="n">overwrite</span><span class="o">);</span>
        <span class="nc">MyBatisGenerator</span> <span class="n">myBatisGenerator</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyBatisGenerator</span><span class="o">(</span><span class="n">config</span><span class="o">,</span>
        <span class="n">callback</span><span class="o">,</span> <span class="n">warnings</span><span class="o">);</span>
        <span class="n">myBatisGenerator</span><span class="o">.</span><span class="na">generate</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>

    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
        <span class="nc">GeneratorSqlmap</span> <span class="n">generatorSqlmap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GeneratorSqlmap</span><span class="o">();</span>
        <span class="n">generatorSqlmap</span><span class="o">.</span><span class="na">generator</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p><strong>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®å¦å†™ä¸€ä¸ªprojectæ¥å®ç°MyBatisçš„é€†å‘å·¥ç¨‹</strong></p>

<p>ç„¶åå†ä»ä¸­æŒ‘é€‰å‡ºå®é™…éœ€è¦çš„POJOç±»å’Œmapper.xmlï¼Œåƒä¸‡ä¸è¦åœ¨åŸæœ‰é¡¹ç›®ä¸­ç›´æ¥ç”Ÿæˆï¼Œé‚£æ ·ä¼šæ¯”è¾ƒä¹±ã€‚</p>

<p>MyBatisé€†å‘å·¥ç¨‹æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥åšä¸ºæ¨¡æ¿å·¥ç¨‹è¿›è¡Œåº”ç”¨ï¼Œåªéœ€è¦æ”¹ä¸€ä¸‹æ•°æ®åº“åï¼Œè¡¨åå’ŒåŒ…çš„è·¯å¾„å°±è¡Œäº†ï¼Œè¿™é‡Œæä¾›é¡¹ç›®ä¸‹è½½åœ°å€ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>

<h2 id="åœ¨mavenå·¥ç¨‹ä¸­çš„resourceä¸­åˆ›å»ºgeneratorconfigxml-1">åœ¨mavenå·¥ç¨‹ä¸­çš„resourceä¸­åˆ›å»ºgeneratorConfig.xml</h2>

<h3 id="é…ç½®-1">é…ç½®</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE generatorConfiguration
  PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
  "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span>

<span class="nt">&lt;generatorConfiguration&gt;</span>
   <span class="c">&lt;!--mysql è¿æ¥æ•°æ®åº“jar è¿™é‡Œé€‰æ‹©è‡ªå·±æœ¬åœ°ä½ç½®--&gt;</span>
   <span class="nt">&lt;classPathEntry</span> <span class="na">location=</span><span class="s">"D:/mysql-connector-java-5.1.20-bin.jar"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;context</span> <span class="na">id=</span><span class="s">"testTables"</span> <span class="na">targetRuntime=</span><span class="s">"MyBatis3"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;commentGenerator&gt;</span>
         <span class="c">&lt;!-- æ˜¯å¦å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š trueï¼šæ˜¯ ï¼š false:å¦ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"suppressAllComments"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/commentGenerator&gt;</span>
      <span class="c">&lt;!--æ•°æ®åº“è¿æ¥çš„ä¿¡æ¯ï¼šé©±åŠ¨ç±»ã€è¿æ¥åœ°å€ã€ç”¨æˆ·åã€å¯†ç  --&gt;</span>
      <span class="nt">&lt;jdbcConnection</span> <span class="na">driverClass=</span><span class="s">"com.mysql.jdbc.Driver"</span>
         <span class="na">connectionURL=</span><span class="s">"jdbc:mysql://localhost:3306/ecps"</span> <span class="na">userId=</span><span class="s">"root"</span>
         <span class="na">password=</span><span class="s">"root"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/jdbcConnection&gt;</span>
      <span class="c">&lt;!-- é»˜è®¤falseï¼ŒæŠŠJDBC DECIMAL å’Œ NUMERIC ç±»å‹è§£æä¸º Integerï¼Œä¸º trueæ—¶æŠŠJDBC DECIMAL å’Œ
         NUMERIC ç±»å‹è§£æä¸ºjava.math.BigDecimal --&gt;</span>
      <span class="nt">&lt;javaTypeResolver&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"forceBigDecimals"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/javaTypeResolver&gt;</span>

      <span class="c">&lt;!-- targetProject:ç”ŸæˆPOç±»çš„ä½ç½® --&gt;</span>
      <span class="nt">&lt;javaModelGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.ecps.seckill.pojo"</span>
         <span class="na">targetProject=</span><span class="s">"src/main/java"</span><span class="nt">&gt;</span>
         <span class="c">&lt;!-- enableSubPackages:æ˜¯å¦è®©schemaä½œä¸ºåŒ…çš„åç¼€ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
         <span class="c">&lt;!-- ä»æ•°æ®åº“è¿”å›çš„å€¼è¢«æ¸…ç†å‰åçš„ç©ºæ ¼ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"trimStrings"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/javaModelGenerator&gt;</span>
        <span class="c">&lt;!-- targetProject:mapperæ˜ å°„æ–‡ä»¶ç”Ÿæˆçš„ä½ç½®
           å¦‚æœmavenå·¥ç¨‹åªæ˜¯å•ç‹¬çš„ä¸€ä¸ªå·¥ç¨‹ï¼ŒtargetProject="src/main/java"
           è‹¥æœmavenå·¥ç¨‹æ˜¯åˆ†æ¨¡å—çš„å·¥ç¨‹ï¼ŒtargetProject="æ‰€å±æ¨¡å—çš„åç§°"ï¼Œä¾‹å¦‚ï¼š
           targetProject="ecps-manager-mapper"ï¼Œä¸‹åŒ--&gt;</span>
      <span class="nt">&lt;sqlMapGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.ecps.seckill.mapper"</span>
         <span class="na">targetProject=</span><span class="s">"src/main/java"</span><span class="nt">&gt;</span>
         <span class="c">&lt;!-- enableSubPackages:æ˜¯å¦è®©schemaä½œä¸ºåŒ…çš„åç¼€ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/sqlMapGenerator&gt;</span>
      <span class="c">&lt;!-- targetPackageï¼šmapperæ¥å£ç”Ÿæˆçš„ä½ç½® --&gt;</span>
      <span class="nt">&lt;javaClientGenerator</span> <span class="na">type=</span><span class="s">"XMLMAPPER"</span>
         <span class="na">targetPackage=</span><span class="s">"com.ecps.seckill.mapper"</span>
         <span class="na">targetProject=</span><span class="s">"src/main/java"</span><span class="nt">&gt;</span>
         <span class="c">&lt;!-- enableSubPackages:æ˜¯å¦è®©schemaä½œä¸ºåŒ…çš„åç¼€ --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/javaClientGenerator&gt;</span>
      <span class="c">&lt;!-- æŒ‡å®šæ•°æ®åº“è¡¨ --&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">schema=</span><span class="s">""</span> <span class="na">tableName=</span><span class="s">"seckill"</span><span class="nt">&gt;&lt;/table&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">schema=</span><span class="s">""</span> <span class="na">tableName=</span><span class="s">"success_killed"</span><span class="nt">&gt;&lt;/table&gt;</span>   
   <span class="nt">&lt;/context&gt;</span>
<span class="nt">&lt;/generatorConfiguration&gt;</span>
</code></pre></div></div>

<h3 id="é…ç½®pomxml-1">é…ç½®pom.xml</h3>

<p>åœ¨pom.xmlä¸­ä½ç½®mybatis-generatorçš„æ’ä»¶</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.mybatis.generator<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>mybatis-generator-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
            <span class="c">&lt;!--é…ç½®æ–‡ä»¶çš„ä½ç½®--&gt;</span>      
            <span class="nt">&lt;configurationFile&gt;</span>src/main/resources/generatorConfig.xml<span class="nt">&lt;/configurationFile&gt;</span>
                <span class="nt">&lt;verbose&gt;</span>true<span class="nt">&lt;/verbose&gt;</span>
                <span class="nt">&lt;overwrite&gt;</span>true<span class="nt">&lt;/overwrite&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;executions&gt;</span>
                <span class="nt">&lt;execution&gt;</span>
                    <span class="nt">&lt;id&gt;</span>Generate MyBatis Artifacts<span class="nt">&lt;/id&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                        <span class="nt">&lt;goal&gt;</span>generate<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                <span class="nt">&lt;/execution&gt;</span>
            <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;dependencies&gt;</span>
                <span class="nt">&lt;dependency&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>org.mybatis.generator<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>mybatis-generator-core<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;/dependency&gt;</span>
            <span class="nt">&lt;/dependencies&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div>

<h3 id="ç”Ÿæˆå¯¹è±¡çš„ä¸¤ç§æ–¹å¼-1">ç”Ÿæˆå¯¹è±¡çš„ä¸¤ç§æ–¹å¼</h3>

<p><strong># ä½¿ç”¨ideaçš„mavenæ’ä»¶ç›´æ¥å¿«é€Ÿç”Ÿæˆ</strong></p>

<ol>
  <li>åœ¨å®Œæˆä»¥ä¸Šä¸¤æ­¥ä¹‹åã€‚å°±ä¼šåœ¨ideaä¸­çœ‹åˆ°ï¼šç›´æ¥ç‚¹å‡»mybatis-generator:generateå°±å¯ç”Ÿæˆ</li>
</ol>

<p><strong># åœ¨Intellij IDEAæ·»åŠ ä¸€ä¸ªâ€œRunè¿è¡Œâ€é€‰é¡¹ï¼Œä½¿ç”¨mavenè¿è¡Œmybatis-generator-maven-pluginæ’ä»¶</strong></p>

<ol>
  <li>
    <p>é€‰æ‹©é…ç½®edit configuration</p>
  </li>
  <li>
    <p>åˆ›å»ºmavenè¿è¡Œé¡¹</p>
  </li>
  <li>
    <p>é…ç½®å‘½ä»¤ mybatis-generator:generate -e</p>
  </li>
  <li>è¿è¡Œ
    <blockquote>
      <blockquote>
        <blockquote>
          <blockquote>
            <blockquote>
              <blockquote>
                <blockquote>
                  <h1 id="f0bfe13-new-update_postsçŸ¥è¯†ç‚¹2019-09-06-mybatis-generatormd">f0bfe13 (new update):_posts/çŸ¥è¯†ç‚¹/2019-09-06-mybatis-generator.md</h1>
                </blockquote>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
  <li>è¿è¡Œ
    <blockquote>
      <blockquote>
        <blockquote>
          <blockquote>
            <blockquote>
              <blockquote>
                <blockquote>
                  <p>e5c77ca (æ–°é¡µé¢)</p>
                </blockquote>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
</ol>
:ET